!function(){var e,n=window.change_username,t=document.querySelector(".user-user-login-wrap td .description"),o=document.getElementById("user_login"),a=d("a",{href:"#",onclick:y},"Change"),s=d("input",{type:"text",name:"new_user_login",value:o.value,className:"regular-text",style:{"min-height":"28px"},autocomplete:"off"}),l=d("input",{type:"button",value:"Change",className:"button",onclick:c}),r=d("form",{method:"POST",onsubmit:c,style:{display:"none"}},[s,l]),i=d("p",{style:{display:"none"}});function u(e,n){for(var t in n)"object"==typeof n[t]?u(e[t],n[t]):e[t]=n[t]}function d(e,n,t){var o=document.createElement(e);if(t||!Array.isArray(n)&&"string"!=typeof n||(t=n,n=null),n&&u(o,n),t)if("string"==typeof t)o.textContent=t;else for(var a=0;a<t.length;a++)o.appendChild(t[a]);return o}function c(t){t.preventDefault();var a=r.new_user_login.value,s=o.value;l.value="Please wait..",l.disabled=!0;var u="current_username="+encodeURIComponent(s)+"&new_username="+encodeURIComponent(a)+"&_ajax_nonce="+encodeURIComponent(n.nonce),d=new XMLHttpRequest;d.open("POST",n.ajaxurl+"?action=change_username",!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.onload=function(){l.value="Change",l.disabled=!1;var t=!0;if(d.status>=200&&d.status<400&&-1!=d.responseText)try{var s=JSON.parse(d.responseText);t=!1,n.nonce=s.new_nonce,i.style.color=s.success?"green":"red",i.innerHTML=s.message,s.success&&(o.value=a,y())}catch(e){}t&&(i.style.color="red",i.textContent="Uh oh, something went wrong submitting the form."),e&&window.clearTimeout(e),i.style.display="",e=window.setTimeout((function(){i.style.display="none"}),6e3)},d.send(u)}function p(e){27===e.keyCode&&y()}function y(e){e&&e.preventDefault(),"none"===r.style.display?(r.style.display="",a.style.display="none",o.style.display="none",s.focus(),document.addEventListener("keydown",p)):(r.style.display="none",a.style.display="inline",o.style.display="",document.removeEventListener("keydown",p))}t.parentNode.replaceChild(a,t),a.parentNode.appendChild(d("div",[r,i]))}();